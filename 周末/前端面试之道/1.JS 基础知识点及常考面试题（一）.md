# 1.JS åŸºç¡€çŸ¥è¯†ç‚¹åŠå¸¸è€ƒé¢è¯•é¢˜ï¼ˆä¸€ï¼‰

### 1.åŽŸå§‹ç±»åž‹ï¼š

ðŸŠQï¼šåŽŸå§‹ç±»åž‹æœ‰å“ªå‡ ç§ï¼Ÿnullæ˜¯å¯¹è±¡ä¹ˆï¼Ÿ

jsä¸­ï¼Œå­˜åœ¨6ç§åŽŸå§‹å€¼ã€‚

- boolean
- null
- number
- string
- undefined
- symbolï¼ˆes6ï¼‰



ðŸŠ Qï¼š'1'.toString() ï¼Ÿ

"1"ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`'1'` å·²ç»ä¸æ˜¯åŽŸå§‹ç±»åž‹äº†ï¼Œè€Œæ˜¯è¢«å¼ºåˆ¶è½¬æ¢æˆäº† `String` ç±»åž‹ä¹Ÿå°±æ˜¯å¯¹è±¡ç±»åž‹ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨ `toString` å‡½æ•°ã€‚



ðŸŠQ:typeof null` ä¼šè¾“å‡º `object

åœ¨ JS çš„æœ€åˆç‰ˆæœ¬ä¸­ä½¿ç”¨çš„æ˜¯ 32 ä½ç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½Žä½å­˜å‚¨å˜é‡çš„ç±»åž‹ä¿¡æ¯ï¼Œ`000` å¼€å¤´ä»£è¡¨æ˜¯å¯¹è±¡ï¼Œç„¶è€Œ `null` è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º `object` ã€‚è™½ç„¶çŽ°åœ¨çš„å†…éƒ¨ç±»åž‹åˆ¤æ–­ä»£ç å·²ç»æ”¹å˜äº†ï¼Œä½†æ˜¯å¯¹äºŽè¿™ä¸ª Bug å´æ˜¯ä¸€ç›´æµä¼ ä¸‹æ¥ã€‚



### 2.å¯¹è±¡ï¼ˆObjectï¼‰ç±»åž‹ï¼š

ðŸŠ å¯¹è±¡ç±»åž‹å’ŒåŽŸå§‹ç±»åž‹çš„ä¸åŒä¹‹å¤„ï¼Ÿå‡½æ•°å‚æ•°æ˜¯å¯¹è±¡ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ

åŽŸå§‹ç±»åž‹å­˜å‚¨çš„æ˜¯å€¼ï¼Œå¯¹è±¡ç±»åž‹å­˜å‚¨çš„æ˜¯åœ°å€ï¼ˆæŒ‡é’ˆï¼‰ã€‚

å½“åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ç±»åž‹çš„æ—¶å€™ï¼Œè®¡ç®—æœºä¼šåœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªç©ºé—´æ¥å­˜æ”¾å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™ä¸ªç©ºé—´ï¼Œè¿™ä¸ªç©ºé—´ä¼šæ‹¥æœ‰ä¸€ä¸ªåœ°å€ï¼ˆæŒ‡é’ˆï¼‰ã€‚



ðŸŠQï¼šçœ‹ä¸‹é¢çš„ä»£ç ç»“æžœï¼š

```javascript
function test(person) {
  person.age = 26
  person = {
    name: 'yyy',
    age: 30
  }

  return person
}
const p1 = {
  name: 'yck',
  age: 25
}
const p2 = test(p1)

console.log(p1) // -> ? {name:"yck",age:26}
console.log(p2) // -> ? {name:"yyy",age:30}
```

æ€è·¯è§£æžï¼š

- é¦–å…ˆå‡½æ•°ä¼ å‚æ˜¯ä¼ é€’å¯¹è±¡æŒ‡é’ˆçš„å‰¯æœ¬

- testå‡½æ•°å†… person.age=26å°†p1çš„ageä¿®æ”¹ä¸º25

- å†å¾€ä¸‹é¢åˆ°äº†

  - ```
     person = {
        name: 'yyy',
        age: 30
      }
    ```

- ä¸Šé¢çš„ä»£ç æ˜¯æ”¹å˜äº†è¿™ä¸ªå‡½æ•°å‚æ•°ï¼ˆå‰¯æœ¬ï¼‰çš„æŒ‡é’ˆï¼Œæ‰€ä»¥p2æ”¹å˜äº†æŒ‡é’ˆçš„æ–¹å‘ï¼Œè€Œp1ä¾ç„¶æ˜¯åŽŸæ¥çš„æŒ‡å‘ï¼Œåªæ˜¯å†…éƒ¨çš„ageè¢«ä¿®æ”¹ä¸º26

  - éœ€è¦å°å¿ƒä¸€ä¸ªäº‹æƒ…å°±æ˜¯æ”¹å˜å¯¹è±¡å†…éƒ¨çš„å€¼ï¼Œå’Œæ”¹å˜è¿™ä¸ªå¯¹è±¡çš„æŒ‡é’ˆä¸ä¸€æ ·

    

### 3.typeof vs instanceofï¼š

ðŸŠQï¼štypeof æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»åž‹ï¼Ÿinstanceof èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŽŸç†æ˜¯ä»€ä¹ˆï¼Ÿ

**`typeof` å¯¹äºŽ ðŸŽ åŽŸå§‹ç±»åž‹æ¥è¯´ï¼Œé™¤äº† `null` éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»åž‹**

```javascript
typeof 1 // 'number'
typeof '1' // 'string'
typeof undefined // 'undefined'
typeof true // 'boolean'
typeof Symbol() // 'symbol'
```

**`typeof` å¯¹äºŽðŸŽ å¯¹è±¡ æ¥è¯´ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º `object`ï¼Œæ‰€ä»¥è¯´ `typeof` å¹¶ä¸èƒ½å‡†ç¡®åˆ¤æ–­å˜é‡åˆ°åº•æ˜¯ä»€ä¹ˆç±»åž‹**

```javascript
typeof [] // 'object'
typeof {} // 'object'
typeof console.log // 'function'
```



ðŸŠQ:æƒ³åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„æ­£ç¡®ç±»åž‹ï¼Œè¿™æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨ `instanceof`ï¼Œå› ä¸ºå†…éƒ¨æœºåˆ¶æ˜¯é€šè¿‡åŽŸåž‹é“¾æ¥åˆ¤æ–­çš„ï¼Œåœ¨åŽé¢çš„ç« èŠ‚ä¸­æˆ‘ä»¬ä¹Ÿä¼šè‡ªå·±åŽ»å®žçŽ°ä¸€ä¸ª `instanceof`

```javascript
const Person = function() {}
const p1 = new Person()
p1 instanceof Person // true

var str = 'hello world'
str instanceof String // false

var str1 = new String('hello world')
str1 instanceof String // true
```

æƒ³ç›´æŽ¥é€šè¿‡ `instanceof` æ¥åˆ¤æ–­ç±»åž‹æ˜¯ä¸è¡Œçš„ï¼Œå½“ç„¶æˆ‘ä»¬è¿˜æ˜¯æœ‰åŠžæ³•è®© `instanceof` åˆ¤æ–­åŽŸå§‹ç±»åž‹çš„

```javascript
class PrimitiveString {
  static [Symbol.hasInstance](x) {
    return typeof x === 'string'
  }
}
console.log('hello world' instanceof PrimitiveString) // true
```

- `Symbol.hasInstance` å…¶å®žå°±æ˜¯ä¸€ä¸ªèƒ½è®©æˆ‘ä»¬è‡ªå®šä¹‰ `instanceof` è¡Œä¸ºçš„ä¸œè¥¿ï¼Œä»¥ä¸Šä»£ç ç­‰åŒäºŽ `typeof 'hello world' === 'string'`ï¼Œæ‰€ä»¥ç»“æžœè‡ªç„¶æ˜¯ `true` äº†ã€‚è¿™å…¶å®žä¹Ÿä¾§é¢åæ˜ äº†ä¸€ä¸ªé—®é¢˜ï¼Œ `instanceof` ä¹Ÿä¸æ˜¯ç™¾åˆ†ä¹‹ç™¾å¯ä¿¡çš„ã€‚



### 4.ç±»åž‹è½¬æ¢ï¼š

åœ¨ JS ä¸­ç±»åž‹è½¬æ¢åªæœ‰ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯ï¼š

- è½¬æ¢ä¸ºå¸ƒå°”å€¼
- è½¬æ¢ä¸ºæ•°å­—
- è½¬æ¢ä¸ºå­—ç¬¦ä¸²



#### 4.1 è½¬å¸ƒå°”å€¼ï¼š

åœ¨æ¡ä»¶åˆ¤æ–­æ—¶ï¼Œé™¤äº† `undefined`ï¼Œ `null`ï¼Œ `false`ï¼Œ `NaN`ï¼Œ `''`ï¼Œ `0`ï¼Œ `-0`ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½è½¬ä¸º `true`ï¼ŒåŒ…æ‹¬æ‰€æœ‰å¯¹è±¡ã€‚



#### 4.2 å¯¹è±¡è½¬åŽŸå§‹ç±»åž‹ï¼š

å¯¹è±¡åœ¨è½¬æ¢ç±»åž‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å†…ç½®çš„ `[[ToPrimitive]]` å‡½æ•°ï¼Œå¯¹äºŽè¯¥å‡½æ•°æ¥è¯´ï¼Œç®—æ³•é€»è¾‘ä¸€èˆ¬æ¥è¯´å¦‚ä¸‹ï¼š

- å¦‚æžœå·²ç»æ˜¯åŽŸå§‹ç±»åž‹äº†ï¼Œé‚£å°±ä¸éœ€è¦è½¬æ¢äº†
- å¦‚æžœéœ€è¦è½¬å­—ç¬¦ä¸²ç±»åž‹å°±è°ƒç”¨ `x.toString()`ï¼Œè½¬æ¢ä¸ºåŸºç¡€ç±»åž‹çš„è¯å°±è¿”å›žè½¬æ¢çš„å€¼ã€‚ä¸æ˜¯å­—ç¬¦ä¸²ç±»åž‹çš„è¯å°±å…ˆè°ƒç”¨ `valueOf`ï¼Œç»“æžœä¸æ˜¯åŸºç¡€ç±»åž‹çš„è¯å†è°ƒç”¨ `toString`
- è°ƒç”¨ `x.valueOf()`ï¼Œå¦‚æžœè½¬æ¢ä¸ºåŸºç¡€ç±»åž‹ï¼Œå°±è¿”å›žè½¬æ¢çš„å€¼
- å¦‚æžœéƒ½æ²¡æœ‰è¿”å›žåŽŸå§‹ç±»åž‹ï¼Œå°±ä¼šæŠ¥é”™

å¯ä»¥é‡å†™ `Symbol.toPrimitive` ï¼Œè¯¥æ–¹æ³•åœ¨è½¬åŽŸå§‹ç±»åž‹æ—¶è°ƒç”¨ä¼˜å…ˆçº§æœ€é«˜ã€‚

```javascript
let a = {
  valueOf() {
    return 0
  },
  toString() {
    return '1'
  },
  [Symbol.toPrimitive]() {
    return 2
  }
}
1 + a // => 3
```



### 5.å››åˆ™è¿ç®—ç¬¦ï¼š

â€œ+â€åŠ æ³•è¿ç®—ç¬¦ä¸åŒäºŽå…¶ä»–å‡ ä¸ªè¿ç®—ç¬¦ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š

- è¿ç®—ä¸­å…¶ä¸­ä¸€æ–¹ä¸ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°±ä¼šæŠŠå¦ä¸€æ–¹ä¹Ÿè½¬æ¢ä¸ºå­—ç¬¦ä¸²

- å¦‚æžœä¸€æ–¹ä¸æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼Œé‚£ä¹ˆä¼šå°†å®ƒè½¬æ¢ä¸ºæ•°å­—æˆ–è€…å­—ç¬¦ä¸²

- ```javascript
  1 + '1' // '11'
  true + true // 2
  4 + [1,2,3] // "41,2,3"
  //å¯¹äºŽç¬¬ä¸‰è¡Œä»£ç æ¥è¯´ï¼Œè§¦å‘ç‰¹ç‚¹äºŒï¼Œæ‰€ä»¥å°†æ•°ç»„é€šè¿‡ toString è½¬ä¸ºå­—ç¬¦ä¸² 1,2,3ï¼Œå¾—åˆ°ç»“æžœ 41,2,3
  ```



ðŸŠQ:å¯¹äºŽåŠ æ³•è¿˜éœ€è¦æ³¨æ„è¿™ä¸ªè¡¨è¾¾å¼ `'a' + + 'b'`

```javascript
'a' + + 'b' // -> "aNaN"
```

å› ä¸º `+ 'b'` ç­‰äºŽ `NaN`ï¼Œæ‰€ä»¥ç»“æžœä¸º `"aNaN"`ï¼Œä½ å¯èƒ½ä¹Ÿä¼šåœ¨ä¸€äº›ä»£ç ä¸­çœ‹åˆ°è¿‡ `+ '1'` çš„å½¢å¼æ¥å¿«é€ŸèŽ·å– `number` ç±»åž‹ã€‚

```javascript
4 * '3' // 12
4 * [] // 0
4 * [1, 2] // NaN
```



### 6.this:

ðŸŠQ:å¦‚ä½•æ­£ç¡®åˆ¤æ–­ thisï¼Ÿç®­å¤´å‡½æ•°çš„ this æ˜¯ä»€ä¹ˆï¼Ÿ

å…ˆæ¥çœ‹å‡ ä¸ªåœºæ™¯ï¼š

```javascript
//ðŸŒµ1
function foo() {
  console.log(this.a)
}
var a = 1
foo()
//ðŸŽ2
const obj = {
  a: 2,
  foo: foo
}
obj.foo()
//â˜˜ï¸3
const c = new foo()
```



- å¯¹äºŽç›´æŽ¥è°ƒç”¨ `foo` æ¥è¯´ï¼Œä¸ç®¡ `foo` å‡½æ•°è¢«æ”¾åœ¨äº†ä»€ä¹ˆåœ°æ–¹ï¼Œ`this` ä¸€å®šæ˜¯ `window`
- å¯¹äºŽ `obj.foo()` æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦è®°ä½ï¼Œè°è°ƒç”¨äº†å‡½æ•°ï¼Œè°å°±æ˜¯ `this`ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ `foo` å‡½æ•°ä¸­çš„ `this` å°±æ˜¯ `obj` å¯¹è±¡
- å¯¹äºŽ `new` çš„æ–¹å¼æ¥è¯´ï¼Œ`this` è¢«æ°¸è¿œç»‘å®šåœ¨äº† `c` ä¸Šé¢ï¼Œä¸ä¼šè¢«ä»»ä½•æ–¹å¼æ”¹å˜ `this`



ðŸŠQ:ç®­å¤´å‡½æ•°çš„æŒ‡å‘

```javascript
function a() {
  return () => {
    return () => {
      console.log(this)
    }
  }
}
console.log(a()()())
```

- ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisçš„
- ç®­å¤´å‡½æ•°ä¸­çš„ `this` åªå–å†³åŒ…è£¹ç®­å¤´å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ™®é€šå‡½æ•°çš„ `this`ã€‚
- è¿™ä¸ªä¾‹å­ä¸­ï¼Œå› ä¸ºåŒ…è£¹ç®­å¤´å‡½æ•°çš„ç¬¬ä¸€ä¸ªæ™®é€šå‡½æ•°æ˜¯ `a`ï¼Œæ‰€ä»¥æ­¤æ—¶çš„ `this` æ˜¯ `window`ã€‚
- **å¦å¤–å¯¹ç®­å¤´å‡½æ•°ä½¿ç”¨ `bind` è¿™ç±»å‡½æ•°æ˜¯æ— æ•ˆçš„ã€‚**



ðŸŠQï¼šæœ€åŽç§æƒ…å†µä¹Ÿå°±æ˜¯ `bind` è¿™äº›æ”¹å˜ä¸Šä¸‹æ–‡çš„ API äº†ï¼Œå¯¹äºŽè¿™äº›å‡½æ•°æ¥è¯´ï¼Œ**`this` å–å†³äºŽç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æžœç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç©ºï¼Œé‚£ä¹ˆå°±æ˜¯ `window`ã€‚**

é‚£ä¹ˆè¯´åˆ° `bind`ï¼Œä¸çŸ¥é“å¤§å®¶æ˜¯å¦è€ƒè™‘è¿‡ï¼Œå¦‚æžœå¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œå¤šæ¬¡ `bind`ï¼Œé‚£ä¹ˆä¸Šä¸‹æ–‡ä¼šæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

```javascript
let a = {}
let fn = function () { console.log(this) }
fn.bind().bind(a)() // => ?windows
```

å¦‚æžœä½ è®¤ä¸ºè¾“å‡ºç»“æžœæ˜¯ `a`ï¼Œé‚£ä¹ˆä½ å°±é”™äº†ï¼Œå…¶å®žæˆ‘ä»¬å¯ä»¥æŠŠä¸Šè¿°ä»£ç è½¬æ¢æˆå¦ä¸€ç§å½¢å¼:

```javascript
// fn.bind().bind(a) ç­‰äºŽ
let fn2 = function fn1() {
  return function() {
    return fn.apply()
  }.apply(a)
}
fn2()
```

å¯ä»¥ä»Žä¸Šè¿°ä»£ç ä¸­å‘çŽ°ï¼Œä¸ç®¡ç»™å‡½æ•° `bind` å‡ æ¬¡ï¼Œ`fn` ä¸­çš„ `this` æ°¸è¿œç”±ç¬¬ä¸€æ¬¡ `bind` å†³å®šï¼Œæ‰€ä»¥ç»“æžœæ°¸è¿œæ˜¯ `window`ã€‚

```javascript
let a = { name: 'yck' }
function foo() {
  console.log(this.name)
}
foo.bind(a)() // => 'yck'
```

